<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui">
    <title>sync</title>
    <link type="text/css" rel="stylesheet" href="../assets/css/github-markdown.css">
    <link type="text/css" rel="stylesheet" href="../assets/css/pilcrow.css">
    <link type="text/css" rel="stylesheet" href="../assets/css/hljs-github.min.css"/>
  </head>
  <body>
    <article class="markdown-body"><h2 id="sync"><a class="header-link" href="#sync"></a>sync</h2>
<p><code>sync</code> 是一个独立的文件和代码同步工具。</p>
<h3 id="-"><a class="header-link" href="#-"></a>使用范例</h3>
<pre class="hljs"><code>usage:
    python sync<span class="hljs-class">.py</span> [conf]
    python sync<span class="hljs-class">.py</span> [src_dir] [des_dir]
sample:
    python sync<span class="hljs-class">.py</span> sync<span class="hljs-class">.json</span>
    python sync<span class="hljs-class">.py</span> addon/ ../../nginx/src/addon/</code></pre><p><code>sync</code> 根据输入参数的个数执行不同的行为：</p>
<ul class="list">
<li><p>如果输入参数是 2 个，则读取配置文件的内容进行同步</p>
</li>
<li><p>如果输入参数是 3 个，则将 <code>src_dir</code> 文件夹的内容同步至 <code>des_dir</code> （平级同步）</p>
</li>
</ul>
<h3 id="--1"><a class="header-link" href="#--1"></a>配置范例</h3>
<p>以下是一个完整的 <code>json</code> 配置文件，包含 <code>sync</code> 所支持的所有字段：</p>
<pre class="hljs"><code>[
    {
        "<span class="hljs-attribute">src</span>":
        <span class="hljs-value">{
            "<span class="hljs-attribute">prefix</span>": <span class="hljs-value"><span class="hljs-string">"../lib_hustngx/nginx/src/core/"</span></span>,
            "<span class="hljs-attribute">files</span>":
            <span class="hljs-value">[
                <span class="hljs-string">"c_dict.c"</span>,
                <span class="hljs-string">"c_dict.h"</span>
            ]
        </span>}</span>,
        "<span class="hljs-attribute">des</span>":
        <span class="hljs-value">{
            "<span class="hljs-attribute">prefix</span>": <span class="hljs-value"><span class="hljs-string">"../../"</span></span>,
            "<span class="hljs-attribute">files</span>":
            <span class="hljs-value">[
                <span class="hljs-string">"hustdb/ha/"</span>,
                <span class="hljs-string">"hustmq/ha/"</span>,
                <span class="hljs-string">"hustlog/"</span>
            ]</span>,
            "<span class="hljs-attribute">suffix</span>": <span class="hljs-value"><span class="hljs-string">"nginx/src/core/"</span>
        </span>}
    </span>},
    {
        "<span class="hljs-attribute">src</span>":
        <span class="hljs-value">{
            "<span class="hljs-attribute">prefix</span>": <span class="hljs-value"><span class="hljs-string">"../"</span></span>,
            "<span class="hljs-attribute">files</span>": 
            <span class="hljs-value">[
                <span class="hljs-string">"lib_hustngx/"</span>,
                <span class="hljs-string">"patch/"</span>,
                <span class="hljs-string">"third_party/"</span>
            ]</span>,
            "<span class="hljs-attribute">suffix</span>": <span class="hljs-value"><span class="hljs-string">"nginx/"</span>
        </span>}</span>,
        "<span class="hljs-attribute">des</span>":
        <span class="hljs-value">{
            "<span class="hljs-attribute">files</span>":
            <span class="hljs-value">[
                <span class="hljs-string">"../hustmqha/nginx/"</span>
            ]
        </span>}
    </span>}
]</code></pre><h3 id="--2"><a class="header-link" href="#--2"></a>字段结构</h3>
<p><a href="sync/sync_files.html"><code>sync_files</code></a><br>　　<a href="sync/sync_file.html"><code>sync_file</code></a><br>　　　　<a href="sync/path.html"><code>path</code></a><br>　　　　　　<a href="sync/prefix.html"><code>prefix</code></a><br>　　　　　　<a href="sync/files.html"><code>files</code></a><br>　　　　　　<a href="sync/suffix.html"><code>suffix</code></a>  </p>
<p><a href="./index.html">上一级</a></p>
<p><a href="../index.html">根目录</a></p>
    </article>
  </body>
</html>
